#!/bin/bash
# Git Setup for AI Workflows
# Configure Git for optimal AI-assisted development

set -e

RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo -e "${YELLOW}Git Configuration for AI Workflows${NC}"
echo ""

# Check current configuration
CURRENT_NAME=$(git config --global user.name 2>/dev/null || echo "")
CURRENT_EMAIL=$(git config --global user.email 2>/dev/null || echo "")

if [ -n "$CURRENT_NAME" ] && [ -n "$CURRENT_EMAIL" ]; then
    echo -e "${GREEN}Git is already configured:${NC}"
    echo "  Name: $CURRENT_NAME"
    echo "  Email: $CURRENT_EMAIL"
    echo ""
    read -p "Do you want to reconfigure? (y/N): " RECONFIG
    if [[ ! "$RECONFIG" =~ ^[Yy]$ ]]; then
        echo "Keeping current configuration"
        exit 0
    fi
fi

# Get user input
read -p "Enter your name: " NAME
read -p "Enter your email: " EMAIL

if [ -z "$NAME" ] || [ -z "$EMAIL" ]; then
    echo -e "${RED}Error: Name and email are required${NC}"
    exit 1
fi

# Set configuration
git config --global user.name "$NAME"
git config --global user.email "$EMAIL"

# Set useful defaults for AI workflows
git config --global init.defaultBranch main
git config --global core.editor "nano"  # or your preferred editor
git config --global pull.rebase false

echo -e "${GREEN}âœ“ Git configured successfully${NC}"
echo ""
echo "Configuration:"
echo "  Name: $(git config --global user.name)"
echo "  Email: $(git config --global user.email)"
echo ""
